/*
 * button.c
 *
 *  Created on: Oct 10, 2023
 *      Author: Acer
 */

#include "button.h"
#include "main.h"

int pressed_flag0 =0;
int pressed_flag1 = 0;
int pressed_flag2 = 0;
int longPressed_flag0 = 0;
int longPressed_flag1 = 0;
int longPressed_flag2 = 0;
int timeOutForKeyPressed = 500;

void isButton1Pressed() {
	if( pressed_flag0 == 1 ) {
		return 1;
	}
	return 0;
}

void isButton2Pressed() {
	if( pressed_flag1 == 1 ) {
			return 1;
		}
		return 0;
}

void isButton3Pressed() {
	if( pressed_flag2 == 1 ) {
			return 1;
		}
		return 0;
}

void isButton1LongPressed() {
	if( longPressed_flag0 == 1 ) {
			return 1;
		}
		return 0;
}

void isButton2LongPressed() {
	if( longPressed_flag1 == 1 ) {
		return 1;
	}
	return 0;
}

void isButton3LongPressed() {
	if( longPressed_flag2 == 1 ) {
		return 1;
	}
	return 0;
}

int keyReg0 = NORMAL_STATE;
int keyReg1 = NORMAL_STATE;
int keyReg2 = NORMAL_STATE;
int keyReg3 = NORMAL_STATE;

void getKeyInput1() {
	keyReg2 = keyReg1;
	keyReg1 = keyReg0;
	keyReg0 = HAL_GPIO_ReadPin(BUTTON1_GPIO_Port, BUTTON1_Pin);

	if( ( keyReg1 == keyReg0 ) && ( keyReg1 == keyReg2 ) ) {
		if( keyReg2 != keyReg3 ) {
			keyReg3 = keyReg2;
			if( keyReg3 == PRESSED_STATTE ) {
				timeOutForKeyPressed = 500;
				pressed_flag0 = 1;
			}
		}else {
			timeOutForKeyPressed--;
			if( timeOutForKeyPressed == 0 ) {
				timeOutForKeyPressed = 500;
				longPressed_flag0 = 1;
			}
		}
	}
}
